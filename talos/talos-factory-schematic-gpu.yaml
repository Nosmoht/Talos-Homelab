customization:
  bootloader: sd-boot
  extraKernelArgs:
    # Performance
    - cpufreq.default_governor=performance
    - intel_idle.max_cstate=0
    - processor.max_cstate=0
    - transparent_hugepage=madvise
    - elevator=none
    # Security
    - mitigations=auto
    - init_on_free=1
    - page_alloc.shuffle=1
    - randomize_kstack_offset=on
    - vsyscall=none
    # NVMe / PCIe / USB power management
    - nvme_core.default_ps_max_latency_us=0
    - pcie_aspm=off
    - workqueue.power_efficient=0
    - usbcore.autosuspend=-1
    # IOMMU (DMA isolation, requires VT-d enabled in BIOS)
    - intel_iommu=on
    - iommu=force
    - iommu.passthrough=0
    - iommu.strict=0
  systemExtensions:
    officialExtensions:
      - siderolabs/drbd
      - siderolabs/gvisor
      - siderolabs/i915
      - siderolabs/intel-ucode
      - siderolabs/nvidia-container-toolkit-lts
      - siderolabs/nvidia-open-gpu-kernel-modules-lts
      - siderolabs/realtek-firmware
